# 5. 서버측의 LAN에는 무엇이 있는가?



### 방화벽의 원리와 동작

- 대부분의 서버 앞에 방화벽이 존재한다. 방화벽에서 서버 안의 특정 애플리케이션에 액세스하려는 패킷만 통과를 시키며 이를위해 **패킷 필터링형**으로 패킷을 선별한다.
- 패킷의 헤더 정보를 바탕으로 **필터링 조건을 설정한다.**
  - 송신측 IP 주소와 상관없이 수신측 IP주소가 웹 서버라면 통과시킨다.
  - 웹 서버에서 응답을 보내고 인터넷에서 응답을 보내는 곳과 패킷이 오는 송신측 IP 주소와 비교하여 같을 때 통과시킨다.
- 웹 서버 내의 특정 애플리케이션에만 접근할 수 있도록 **포트 번호를 사용한다.**
  - IP주소로만 패킷을 통과시키면 서버 내의 다른 애플리케이션에 접근하는 문제가 있을 수 있기 때문에 특정 애플리케이션에 접근할 수 있도록 포트번호도 비교한다.
- 웹 서버에서 인터넷에 액세스하는 동작도 차단시킬 수 있어야한다.
  - TCP 프로토콜은 양방향으로 패킷이 흐르기 때문에 패킷을 정지시킬 수 없다.
  - 따라서 패킷이 흐르는 방향이 아니라 액세스하는 방향을 기준으로 패킷을 정지시키도록 한다.
  - 이를위해 **TCP 헤더에 있는 컨트롤 비트를 사용한다.**
    - TCP는 최초 접속 단계에서 3개의 패킷이 흐른다.
    - 최초의 패킷만 SYN이 1, ACK가 0이 되고 다른 패킷은 이와다른 값을 갖는다.
    - 