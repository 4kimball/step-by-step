# 02-02. 서버에 접속한다.



### 접속의 의미

소켓을 만들면 웹 브라우저는 connect를 호출하고 프로토콜 스택은 서버측 소켓에 접속한다.

이렇게 접속한다고해서 데이터를 주고받을 수 있는 것이아니다. 서로에게 IP주소, 포트 번호 등의 정보가 필요하다. 따라서 서버에게 클라이언트에 대한 정보를 보내서 통신을 개시한다. 이 과정도 접속의 일부분이다.

첫 번째 접속동작은 클라이언트와 서버 사이에 제어정보를 주고 받아 소켓에 필요한 정보를 기록하고, 데이터 송수신이 가능한 상태로 만드는 것이다.



### connect

접속의 시작은 Socket 라이브러리의 connect를 호출하는 것이다. 데이터 송수신을 위해 제어정보를 기록한 헤더를 만들게된다.

접속의 과정은 다음과 같다.

- TCP 헤더를 만들어 IP에 전달하여 전송을 맡긴다.
- IP가 패킷 송신 동작을 실행한다.
- 네트워크를 거쳐 패킷이 서버에 도착하면 서버측의 IP가 서버측의 TCP에 건넨다.
- 서버측 TCP는 헤더를 탐색하여 수신처로 기록된 소켓을 찾는다.
- 소켓에 필요한 정보를 기록하고 접속 동작이 진행된다.
- 서버도 TCP 헤더를 만들어 응답을 보낸다.
- 응답을 보낼 때는 **ACK**을 통해 패킷을 잘 받았다는 신호를 보낸다.